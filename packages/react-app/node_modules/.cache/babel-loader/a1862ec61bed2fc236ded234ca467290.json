{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chris\\\\Documents\\\\Workspace\\\\xanadu-contracts\\\\scaffold-eth\\\\packages\\\\react-app\\\\src\\\\SmartContractWallet.js\";\nimport React, { useState } from 'react';\nimport { ethers } from \"ethers\";\nimport { Card, Row, Col, List, Input, Button } from 'antd';\nimport { DownloadOutlined, UploadOutlined, CloseCircleOutlined, CheckCircleOutlined, RocketOutlined, SafetyOutlined } from '@ant-design/icons';\nimport { useContractLoader, useContractReader, useEventListener, useBlockNumber, useBalance, useTimestamp } from \"./hooks\";\nimport { Transactor } from \"./helpers\";\nimport { Address, Balance, Timeline, AddressInput } from \"./components\";\nconst {\n  Meta\n} = Card;\nconst contractName = \"SmartContractWallet\";\nexport default function SmartContractWallet(props) {\n  const tx = Transactor(props.injectedProvider, props.gasPrice);\n  const localBlockNumber = useBlockNumber(props.localProvider);\n  const localBalance = useBalance(props.address, props.localProvider);\n  const readContracts = useContractLoader(props.localProvider);\n  const writeContracts = useContractLoader(props.injectedProvider);\n  const limit = useContractReader(readContracts, contractName, \"limit\", 1777);\n  const friends = useContractReader(readContracts, contractName, \"friends\", [props.address], 1777);\n  const friendUpdates = useEventListener(readContracts, contractName, \"UpdateFriend\", props.localProvider, 1);\n  const owner = useContractReader(readContracts, contractName, \"owner\", 1777);\n  const contractAddress = readContracts ? readContracts[contractName].address : \"\";\n  const contractBalance = useBalance(contractAddress, props.localProvider);\n  const [friendAddress, setFriendAddress] = useState(\"\");\n\n  const updateFriend = isFriend => {\n    return () => {\n      tx(writeContracts['SmartContractWallet'].updateFriend(friendAddress, isFriend));\n      setFriendAddress(\"\");\n    };\n  };\n\n  const [recoveryAddress, setRecoveryAddress] = useState(\"\");\n  let ownerDisplay = [];\n\n  if (props.address == owner) {\n    ownerDisplay.push( /*#__PURE__*/React.createElement(Row, {\n      align: \"middle\",\n      gutter: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 8,\n      style: {\n        textAlign: \"right\",\n        opacity: 0.333,\n        paddingRight: 6,\n        fontSize: 24\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, \"Friend:\"), /*#__PURE__*/React.createElement(Col, {\n      span: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(AddressInput, {\n      value: friendAddress,\n      ensProvider: props.ensProvider,\n      onChange: address => {\n        setFriendAddress(address);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      span: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        marginLeft: 4\n      },\n      onClick: updateFriend(true),\n      shape: \"circle\",\n      icon: /*#__PURE__*/React.createElement(CheckCircleOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 92\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        marginLeft: 4\n      },\n      onClick: updateFriend(false),\n      shape: \"circle\",\n      icon: /*#__PURE__*/React.createElement(CloseCircleOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 93\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }))));\n  }\n\n  ownerDisplay.push( /*#__PURE__*/React.createElement(Row, {\n    align: \"middle\",\n    gutter: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 8,\n    style: {\n      textAlign: \"right\",\n      opacity: 0.333,\n      paddingRight: 6,\n      fontSize: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, \"Recovery:\"), /*#__PURE__*/React.createElement(Col, {\n    span: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AddressInput, {\n    value: recoveryAddress,\n    ensProvider: props.ensProvider,\n    onChange: address => {\n      setRecoveryAddress(address);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    span: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      marginLeft: 4\n    },\n    onClick: () => {\n      tx(writeContracts['SmartContractWallet'].setRecoveryAddress(recoveryAddress));\n      setRecoveryAddress(\"\");\n    },\n    shape: \"circle\",\n    icon: /*#__PURE__*/React.createElement(CheckCircleOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 31\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }))));\n  let cardActions = [];\n\n  if (props.address == owner) {\n    cardActions = [/*#__PURE__*/React.createElement(\"div\", {\n      onClick: () => {\n        tx(writeContracts['SmartContractWallet'].withdraw());\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(UploadOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }), \" Withdraw\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: () => {\n        tx({\n          to: contractAddress,\n          value: ethers.utils.parseEther('0.001')\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DownloadOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }), \" Deposit\")];\n  }\n\n  let display;\n\n  if (readContracts && readContracts[contractName]) {\n    display = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      align: \"middle\",\n      gutter: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 8,\n      style: {\n        textAlign: \"right\",\n        opacity: 0.333,\n        paddingRight: 6,\n        fontSize: 24\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, \"Deployed to:\"), /*#__PURE__*/React.createElement(Col, {\n      span: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Address, {\n      value: contractAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      align: \"middle\",\n      gutter: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 8,\n      style: {\n        textAlign: \"right\",\n        opacity: 0.333,\n        paddingRight: 6,\n        fontSize: 24\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, \"Owner:\"), /*#__PURE__*/React.createElement(Col, {\n      span: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Address, {\n      value: owner,\n      onChange: newOwner => {\n        tx(writeContracts['SmartContractWallet'].updateOwner(newOwner));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }))), ownerDisplay);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, \"\\uD83D\\uDCC4 Smart Contract Wallet with Recovery\", /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: 'right',\n        opacity: owner ? 0.77 : 0.33\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Balance, {\n      address: contractAddress,\n      provider: props.localProvider,\n      dollarMultiplier: props.price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }))),\n    size: \"large\",\n    style: {\n      width: 550,\n      marginTop: 25\n    },\n    loading: !owner,\n    actions: cardActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Meta, {\n    description: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, display),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(List, {\n    style: {\n      width: 550,\n      marginTop: 25\n    },\n    header: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 22\n      }\n    }, \"Friend Updates\")),\n    bordered: true,\n    dataSource: friendUpdates,\n    renderItem: item => /*#__PURE__*/React.createElement(List.Item, {\n      style: {\n        fontSize: 22\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Address, {\n      ensProvider: props.ensProvider,\n      value: item.friend,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }), \" \", item.isFriend ? \"✅\" : \"❌\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'fixed',\n      textAlign: 'right',\n      right: 25,\n      top: 90,\n      padding: 10,\n      width: \"50%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"\\u2705\"), \" TODO LIST\"), /*#__PURE__*/React.createElement(Timeline, {\n    localProvider: props.localProvider,\n    address: props.address,\n    chainIsUp: typeof localBlockNumber != \"undefined\",\n    hasOwner: typeof owner != \"undefined\",\n    hasEther: parseFloat(localBalance) > 0,\n    contractAddress: contractAddress,\n    contractHasEther: parseFloat(contractBalance) > 0,\n    amOwnerOfContract: owner === props.address //hasLimit={limit&&limit.toNumber()>0}\n    ,\n    hasFriends: typeof friends != \"undefined\",\n    hasFriendEvents: typeof friendUpdates != \"undefined\" && friendUpdates.length > 0,\n    hasRecovery: typeof recoveryAddress != \"undefined\" && typeof currentRecoveryAddress != \"undefined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/chris/Documents/Workspace/xanadu-contracts/scaffold-eth/packages/react-app/src/SmartContractWallet.js"],"names":["React","useState","ethers","Card","Row","Col","List","Input","Button","DownloadOutlined","UploadOutlined","CloseCircleOutlined","CheckCircleOutlined","RocketOutlined","SafetyOutlined","useContractLoader","useContractReader","useEventListener","useBlockNumber","useBalance","useTimestamp","Transactor","Address","Balance","Timeline","AddressInput","Meta","contractName","SmartContractWallet","props","tx","injectedProvider","gasPrice","localBlockNumber","localProvider","localBalance","address","readContracts","writeContracts","limit","friends","friendUpdates","owner","contractAddress","contractBalance","friendAddress","setFriendAddress","updateFriend","isFriend","recoveryAddress","setRecoveryAddress","ownerDisplay","push","textAlign","opacity","paddingRight","fontSize","ensProvider","marginLeft","cardActions","withdraw","to","value","utils","parseEther","display","newOwner","updateOwner","float","price","width","marginTop","item","friend","position","right","top","padding","parseFloat","length","currentRecoveryAddress"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { ethers } from \"ethers\";\r\nimport { Card, Row, Col, List, Input, Button } from 'antd';\r\nimport { DownloadOutlined, UploadOutlined, CloseCircleOutlined, CheckCircleOutlined, RocketOutlined, SafetyOutlined } from '@ant-design/icons';\r\nimport { useContractLoader, useContractReader, useEventListener, useBlockNumber, useBalance, useTimestamp } from \"./hooks\"\r\nimport { Transactor } from \"./helpers\"\r\nimport { Address, Balance, Timeline, AddressInput } from \"./components\"\r\nconst { Meta } = Card;\r\nconst contractName = \"SmartContractWallet\"\r\n\r\nexport default function SmartContractWallet(props) {\r\n\r\n  const tx = Transactor(props.injectedProvider,props.gasPrice)\r\n\r\n  const localBlockNumber = useBlockNumber(props.localProvider)\r\n  const localBalance = useBalance(props.address,props.localProvider)\r\n\r\n  const readContracts = useContractLoader(props.localProvider);\r\n  const writeContracts = useContractLoader(props.injectedProvider);\r\n\r\n  const limit = useContractReader(readContracts,contractName,\"limit\",1777);\r\n  const friends = useContractReader(readContracts,contractName,\"friends\",[props.address],1777);\r\n  const friendUpdates = useEventListener(readContracts,contractName,\"UpdateFriend\",props.localProvider,1);\r\n  const owner = useContractReader(readContracts,contractName,\"owner\",1777);\r\n\r\n  const contractAddress = readContracts?readContracts[contractName].address:\"\"\r\n  const contractBalance = useBalance(contractAddress,props.localProvider)\r\n\r\n  const [ friendAddress, setFriendAddress ] = useState(\"\")\r\n\r\n  const updateFriend = (isFriend)=>{\r\n  return ()=>{\r\n    tx(writeContracts['SmartContractWallet'].updateFriend(friendAddress, isFriend))\r\n    setFriendAddress(\"\")\r\n    }\r\n  }\r\n\r\n  const [ recoveryAddress, setRecoveryAddress ] = useState(\"\")\r\n\r\n\r\n\r\n  let ownerDisplay = []\r\n  if(props.address==owner){\r\n    ownerDisplay.push(\r\n      <Row align=\"middle\" gutter={4}>\r\n        <Col span={8} style={{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24}}>Friend:</Col>\r\n        <Col span={10}>\r\n          <AddressInput\r\n            value={friendAddress}\r\n            ensProvider={props.ensProvider}\r\n            onChange={(address)=>{setFriendAddress(address)}}\r\n          />\r\n        </Col>\r\n        <Col span={6}>\r\n          <Button style={{marginLeft:4}} onClick={updateFriend(true)} shape=\"circle\" icon={<CheckCircleOutlined />} />\r\n          <Button style={{marginLeft:4}} onClick={updateFriend(false)} shape=\"circle\" icon={<CloseCircleOutlined />} />\r\n        </Col>\r\n      </Row>\r\n    )\r\n  }\r\n\r\n  ownerDisplay.push(\r\n  <Row align=\"middle\" gutter={4}>\r\n    <Col span={8} style={{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24}}>Recovery:</Col>\r\n    <Col span={10}>\r\n      <AddressInput\r\n        value={recoveryAddress}\r\n        ensProvider={props.ensProvider}\r\n        onChange={(address)=>{\r\n          setRecoveryAddress(address)\r\n        }}\r\n      />\r\n    </Col>\r\n    <Col span={6}>\r\n      <Button style={{marginLeft:4}} onClick={()=>{\r\n        tx(writeContracts['SmartContractWallet'].setRecoveryAddress(recoveryAddress))\r\n        setRecoveryAddress(\"\")\r\n      }} shape=\"circle\" icon={<CheckCircleOutlined />} />\r\n    </Col>\r\n  </Row>\r\n)\r\n\r\n\r\n  let cardActions = []\r\n  if(props.address==owner){\r\n    cardActions = [\r\n      <div onClick={()=>{\r\n        tx(writeContracts['SmartContractWallet'].withdraw())\r\n      }}>\r\n        <UploadOutlined /> Withdraw\r\n      </div>,\r\n      <div onClick={()=>{\r\n        tx({\r\n          to: contractAddress,\r\n          value: ethers.utils.parseEther('0.001'),\r\n        })\r\n      }}>\r\n        <DownloadOutlined /> Deposit\r\n      </div>,\r\n    ]\r\n  }\r\n\r\n  let display\r\n  if(readContracts && readContracts[contractName]){\r\n    display = (\r\n      <div>\r\n        <Row align=\"middle\" gutter={4}>\r\n          <Col span={8} style={{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24}}>\r\n            Deployed to:\r\n          </Col>\r\n          <Col span={16}>\r\n            <Address value={contractAddress} />\r\n          </Col>\r\n        </Row>\r\n        <Row align=\"middle\" gutter={4}>\r\n          <Col span={8} style={{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24}}>\r\n            Owner:\r\n          </Col>\r\n          <Col span={16}>\r\n            <Address value={owner} onChange={(newOwner)=>{\r\n              tx(writeContracts['SmartContractWallet'].updateOwner(newOwner))\r\n            }}/>\r\n          </Col>\r\n        </Row>\r\n        {ownerDisplay}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        title={(\r\n          <div>\r\n            📄 Smart Contract Wallet with Recovery\r\n            <div style={{float:'right',opacity:owner?0.77:0.33}}>\r\n              <Balance\r\n                address={contractAddress}\r\n                provider={props.localProvider}\r\n                dollarMultiplier={props.price}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n        size=\"large\"\r\n        style={{ width: 550, marginTop: 25 }}\r\n        loading={!owner}\r\n        actions={cardActions}>\r\n          <Meta\r\n            description={(\r\n              <div>\r\n                {display}\r\n              </div>\r\n            )}\r\n          />\r\n      </Card>\r\n\r\n      <List\r\n        style={{ width: 550, marginTop: 25}}\r\n        header={<div><b>Friend Updates</b></div>}\r\n        bordered\r\n        dataSource={friendUpdates}\r\n        renderItem={item => (\r\n          <List.Item style={{ fontSize:22 }}>\r\n            <Address\r\n              ensProvider={props.ensProvider}\r\n              value={item.friend}\r\n            /> {item.isFriend?\"✅\":\"❌\"}\r\n          </List.Item>\r\n        )}\r\n      />\r\n\r\n      <div style={{position:'fixed',textAlign:'right',right:25,top:90,padding:10,width:\"50%\"}}>\r\n        <h1><span role=\"img\" aria-label=\"checkmark\">✅</span> TODO LIST</h1>\r\n        <Timeline\r\n          localProvider={props.localProvider}\r\n          address={props.address}\r\n          chainIsUp={typeof localBlockNumber != \"undefined\"}\r\n          hasOwner={typeof owner != \"undefined\"}\r\n          hasEther={parseFloat(localBalance)>0}\r\n          contractAddress={contractAddress}\r\n          contractHasEther={parseFloat(contractBalance)>0}\r\n          amOwnerOfContract={owner===props.address}\r\n          //hasLimit={limit&&limit.toNumber()>0}\r\n          hasFriends={typeof friends != \"undefined\"}\r\n          hasFriendEvents={typeof friendUpdates != \"undefined\" && friendUpdates.length > 0}\r\n          hasRecovery={typeof recoveryAddress != \"undefined\" && typeof currentRecoveryAddress != \"undefined\" }\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}